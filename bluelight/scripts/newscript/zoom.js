function zoom(){"zoom"==BL_mode&&(DeleteMouseEvent(),openZoom=!0,SetWindowWL(!0),getByid("labelZoom").style.display="",getByid("textZoom").style.display="",SetTable(),document.documentElement.onmousemove=displayZoom,document.documentElement.ontouchmove=displayZoom,set_BL_model.onchange1=function(){document.documentElement.onmousemove=DivDraw,document.documentElement.ontouchmove=DivDraw,getByid("labelZoom").style.display="none",getByid("textZoom").style.display="none",openZoom=!1,set_BL_model.onchange1=function(){return 0}},Mousedown=function(e){1==e.which?MouseDownCheck=!0:3==e.which&&(rightMouseDown=!0),windowMouseX=GetmouseX(e),windowMouseY=GetmouseY(e),GetViewport().originalPointX=getCurrPoint(e)[0],GetViewport().originalPointY=getCurrPoint(e)[1],1==MouseDownCheck&&(magnifierDiv.style.display="");let o=rotateCalculation(e);magnifierIng(o[0],o[1])},Mousemove=function(e){var o=getCurrPoint(e)[0],t=getCurrPoint(e)[1],n=getClass("labelXY");{let o=rotateCalculation(e);n[viewportNumber].innerText="X: "+parseInt(o[0])+" Y: "+parseInt(o[1])}if(1==rightMouseDown&&scale_size(e,o,t),1==openLink)for(var i=0;i<Viewport_Total;i++)GetViewport(i).newMousePointX=GetViewport().newMousePointX,GetViewport(i).newMousePointY=GetViewport().newMousePointY;for(putLabel(),i=0;i<Viewport_Total;i++)displayRuler(i);if(MouseDownCheck){magnifierDiv.style.display="";let n=rotateCalculation(e);magnifierIng(n[0],n[1]),windowMouseX=GetmouseX(e),windowMouseY=GetmouseY(e),GetViewport().originalPointX=o,GetViewport().originalPointY=t}},Mouseup=function(e){if(getCurrPoint(e)[0],getCurrPoint(e)[1],1==openMouseTool&&1==rightMouseDown&&displayMark(),MouseDownCheck=!1,rightMouseDown=!1,magnifierDiv.style.display="none",openLink)for(var o=0;o<Viewport_Total;o++)displayRuler(o)},Touchstart=function(e,o){o?rightTouchDown=!0:TouchDownCheck=!0,windowMouseX=GetmouseX(e),windowMouseY=GetmouseY(e),1==rightTouchDown&&o&&(windowMouseX2=GetmouseX(o),windowMouseY2=GetmouseY(o)),GetViewport().originalPointX=getCurrPoint(e)[0],GetViewport().originalPointY=getCurrPoint(e)[1],1==rightTouchDown&&o&&(GetViewport().originalPointX2=getCurrPoint(o)[0],GetViewport().originalPointY2=getCurrPoint(o)[1]);{magnifierDiv.style.display="";let o=rotateCalculation(e);var t=o[0],n=o[1];magnifierIng(t,n)}},Touchmove=function(e,o){if(!openDisplayMarkup||!getByid("DICOMTagsSelect").selected&&!getByid("AIMSelect").selected){var t=getCurrPoint(e)[0],n=getCurrPoint(e)[1];if(o&&(getCurrPoint(o)[0],getCurrPoint(o)[1]),getClass("labelXY")[viewportNumber].innerText="X: "+Math.floor(t)+" Y: "+Math.floor(n),1==TouchDownCheck&&0==rightTouchDown&&0==rightTouchDown){magnifierDiv.style.display="";let o=rotateCalculation(e);var i=o[0],r=o[1];magnifierIng(i,r)}}},Touchend=function(e,o){1==TouchDownCheck&&(1==openAngle?openAngle=2:2==openAngle&&(openAngle=3)),TouchDownCheck=!1,rightTouchDown=!1,magnifierDiv.style.display="none"},AddMouseEvent())}function displayZoom(e){x_out=-parseInt(magnifierCanvas.style.width)/2,y_out=-parseInt(magnifierCanvas.style.height)/2,document.body.scrollTop&&0!=document.body.scrollTop?(dbst=document.body.scrollTop,dbsl=document.body.scrollLeft):(dbst=document.getElementsByTagName("html")[0].scrollTop,dbsl=document.getElementsByTagName("html")[0].scrollLeft),dgs=document.getElementById("magnifierDiv").style,y=e.clientY,x=e.clientX,!e.touches||y&&x||(y=e.touches[0].clientY,x=e.touches[0].clientX),1!=MouseDownCheck&&1!=TouchDownCheck||(dgs.top=y+dbst+y_out+"px",dgs.left=x+dbsl+x_out+"px")}