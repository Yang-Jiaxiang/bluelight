function getQueryVariable_xnat(e){for(var o=window.location.search.substring(1).split("&"),t=0;t<o.length;t++){var n=o[t].split("=");if(n[0]==e)return n[1]}return!1}function readXNATRequest(){var e=getQueryVariable_xnat("experiments"),o=getQueryVariable_xnat("scans"),t=getQueryVariable_xnat("format");0!=e&&0!=o&&(0==t&&(t="json"),readJson_xnat(window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/data/experiments/"+e+"/scans/"+o+"/files/?format="+t))}function readJson_xnat(e){var o=e,t=new XMLHttpRequest;t.open("GET",o),t.responseType="json",t.send(),t.onload=function(){for(var o=t.response,n=0;n<o.ResultSet.Result.length;n++)if(["DICOM","DCM","secondary"].includes(o.ResultSet.Result[n].collection)){var a=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+o.ResultSet.Result[n].URI;e="wadouri:"+a,series=loadAndViewImage(e)}else console.error("Not supported collection type")}}readXNATRequest();