var contextmenuF=function(e){e.preventDefault()},touchstartF=function(e){e.touches[1]?Touchstart(e.touches[0],e.touches[1]):Touchstart(e.touches[0])},touchendF=function(e){e.touches[1]?Touchend(e.touches[0],e.touches[1]):Touchend(e.touches[0])},touchmoveF=function(e){e.touches[1]?Touchmove(e.touches[0],e.touches[1]):Touchmove(e.touches[0])},thisF=function(){getByid("WindowDefault").selected=!0;for(var e=0;e<Viewport_Total;e++)if("MyDicomDiv"+e==""+this.id){var t=viewportNumber;MeasureXY[0]=MeasureXY[1]=MeasureXY2[0]=MeasureXY2[1]=0,viewportNumber=e,0==GetViewport().openPlay?getByid("playvideo").src="../image/icon/black/b_CinePlay.png":getByid("playvideo").src="../image/icon/black/b_CinePause.png",changeMarkImg();var a=GetViewport().sop,i=SearchUid2Json(a);if(i)loadAndViewImage(Patient.Study[i.studyuid].Series[i.sreiesuid].Sop[i.sopuid].imageId);else{a=GetViewport(t).sop,i=SearchUid2Json(a);try{loadAndViewImage(Patient.Study[i.studyuid].Series[i.sreiesuid].Sop[i.sopuid].imageId)}catch(e){}}break}};function Wheel(e){if(!openDisplayMarkup||!getByid("DICOMTagsSelect").selected&&!getByid("AIMSelect").selected){getByid("MeasureLabel").style.display="none";for(var t=GetViewport(),a=t.canvas(),i=!1,o=viewportNumber,n=0;n<Viewport_Total;n++){if(i=!1,1==openLink&&(o=n),1==openWheel||1==openMouseTool||1==openChangeFile||1==openWindow||1==openZoom||1==openMeasure){e.pageX,a.getBoundingClientRect().left,GetViewport().newMousePointX,GetViewport().imageWidth,parseInt(GetViewport().canvas().style.width),e.pageY,a.getBoundingClientRect().top,GetViewport().newMousePointY,GetViewport().imageHeight,parseInt(GetViewport().canvas().style.height);var r=GetViewport(o).sop;try{var[s,d,c]=SearchUid2Index(t.sop)}catch(e){return}var u=parseInt(Patient.Study[s].Series[d].Sop[c].InstanceNumber),g=sortInstance(r);if(0==g.length)continue;if(1==g.length&&!g[0].frames)continue;if(1==g.length&&g[0].frames){if(null==GetViewport(o).framesNumber&&(GetViewport(o).framesNumber=0),e.deltaY<0){for(var l=0;l<g[0].frames.length&&1!=i;l++)if(l==GetViewport(o).framesNumber){if(l-1<0){loadAndViewImage(g[0].imageId,o,g[0].frames.length-1),g[0].frames.length,i=!0;break}loadAndViewImage(g[0].imageId,o,l-1),i=!0;break}}else for(l=0;l<g[0].frames.length&&1!=i;l++)if(l==GetViewport(o).framesNumber){if(l+1>=g[0].frames.length){loadAndViewImage(g[0].imageId,o,0),i=!0;break}loadAndViewImage(g[0].imageId,o,l+1),i=!0;break}}else if(e.deltaY<0){for(l=0;l<g.length&&1!=i;l++)if(g[l].InstanceNumber==u){if(l-1<0){loadAndViewImage(g[g.length-1].imageId,o),g.length,i=!0;break}loadAndViewImage(g[l-1].imageId,o),i=!0;break}}else for(l=0;l<g.length&&1!=i;l++)if(g[l].InstanceNumber==u){if(l+1>=g.length){loadAndViewImage(g[0].imageId,o),i=!0;break}loadAndViewImage(g[l+1].imageId,o),i=!0;break}}if(0==openLink)break}}}function Mouseout(e){magnifierDiv.style.display="none"}window.addEventListener("load",(function(){var e=!1,t=0;document.addEventListener("touchstart",(function(a){1===a.touches.length&&(t=a.touches[0].clientY,e=0===window.pageYOffset)}),!1),document.addEventListener("touchmove",(function(a){var i=a.touches[0].clientY,o=i-t;t=i,e&&(e=!1,o>0)&&a.preventDefault()}),!1)})),interact(".LeftImg").draggable({onmove(e){openLeftImgClick&&(dragseries=e.target.series)}}),interact(".MyDicomDiv").dropzone({accept:".LeftImg",ondropactivate:function(e){e.target.classList.add("drop-active")},ondragenter:function(e){var t=e.relatedTarget;e.target.classList.add("drop-target"),t.classList.add("can-drop")},ondragleave:function(e){e.target.classList.remove("drop-target"),e.relatedTarget.classList.remove("can-drop")},ondrop:function(e){openLeftImgClick&&(viewportNumber=parseInt(e.target.viewportNum),PictureOnclick(dragseries))},ondropdeactivate:function(e){e.target.classList.remove("drop-active"),e.target.classList.remove("drop-target")}});