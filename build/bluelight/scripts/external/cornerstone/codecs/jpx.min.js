/*! For license information please see jpx.min.js.LICENSE.txt */
"use strict";var PDFJS={};function info(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+e)}function warn(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+e)}function error(e){if(arguments.length>1){var t=["Error:"];t.push.apply(t,arguments),console.log.apply(console,t),e=[].join.call(arguments," ")}else console.log("Error: "+e);throw console.log(backtrace()),UnsupportedManager.notify(UNSUPPORTED_FEATURES.unknown),new Error(e)}function backtrace(){try{throw new Error}catch(e){return e.stack?e.stack.split("\n").slice(2).join("\n"):""}}function assert(e,t){e||error(t)}function combineUrl(e,t){if(!t)return e;if(/^[a-z][a-z0-9+\-.]*:/i.test(t))return t;var n;if("/"===t.charAt(0))return n=e.indexOf("://"),"/"===t.charAt(1)?++n:n=e.indexOf("/",n+3),e.substring(0,n)+t;var r=e.length;r=(n=e.lastIndexOf("#"))>=0?n:r,r=(n=e.lastIndexOf("?",r))>=0?n:r;var i=e.lastIndexOf("/",r);return e.substring(0,i+1)+t}function isValidUrl(e,t){if(!e)return!1;var n=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(e);if(!n)return t;switch(n=n[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1}}function shadow(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}function bytesToString(e){assert(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length,n=8192;if(n>t)return String.fromCharCode.apply(null,e);for(var r=[],i=0;t>i;i+=n){var s=Math.min(i+n,t),a=e.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function stringToBytes(e){assert("string"==typeof e,"Invalid argument for stringToBytes");for(var t=e.length,n=new Uint8Array(t),r=0;t>r;++r)n[r]=255&e.charCodeAt(r);return n}function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function log2(e){for(var t=1,n=0;e>t;)t<<=1,n++;return n}function readInt8(e,t){return e[t]<<24>>24}function readUint16(e,t){return e[t]<<8|e[t+1]}function readUint32(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function isLittleEndian(){var e=new Uint8Array(2);return e[0]=1,1===new Uint16Array(e.buffer)[0]}function hasCanvasTypedArrays(){var e=document.createElement("canvas");return e.width=e.height=1,void 0!==e.getContext("2d").createImageData(1,1).data.buffer}function stringToPDFString(e){var t,n=e.length,r=[];if("þ"===e[0]&&"ÿ"===e[1])for(t=2;n>t;t+=2)r.push(String.fromCharCode(e.charCodeAt(t)<<8|e.charCodeAt(t+1)));else for(t=0;n>t;++t){var i=PDFStringTranslateTable[e.charCodeAt(t)];r.push(i?String.fromCharCode(i):e.charAt(t))}return r.join("")}function stringToUTF8String(e){return decodeURIComponent(escape(e))}function isEmptyObj(e){for(var t in e)return!1;return!0}function isBool(e){return"boolean"==typeof e}function isInt(e){return"number"==typeof e&&(0|e)===e}function isNum(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isNull(e){return null===e}function isName(e){return e instanceof Name}function isCmd(e,t){return e instanceof Cmd&&(void 0===t||e.cmd===t)}function isDict(e,t){if(!(e instanceof Dict))return!1;if(!t)return!0;var n=e.get("Type");return isName(n)&&n.name===t}function isArray(e){return e instanceof Array}function isStream(e){return"object"==typeof e&&null!==e&&void 0!==e.getBytes}function isArrayBuffer(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength}function isRef(e){return e instanceof Ref}function createPromiseCapability(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}function MessageHandler(e,t){this.name=e,this.comObj=t,this.callbackIndex=1,this.postMessageTransfers=!0;var n=this.callbacksCapabilities={},r=this.actionHandler={};r.console_log=[function(e){console.log.apply(console,e)}],r.console_error=[function(e){console.error.apply(console,e)}],r._unsupported_feature=[function(e){UnsupportedManager.notify(e)}],t.onmessage=function(e){var i=e.data;if(i.isReply){var s=i.callbackId;if(i.callbackId in n){var a=n[s];delete n[s],"error"in i?a.reject(i.error):a.resolve(i.data)}else error("Cannot resolve callback "+s)}else if(i.action in r){var o=r[i.action];i.callbackId?Promise.resolve().then((function(){return o[0].call(o[1],i.data)})).then((function(e){t.postMessage({isReply:!0,callbackId:i.callbackId,data:e})}),(function(e){t.postMessage({isReply:!0,callbackId:i.callbackId,error:e})})):o[0].call(o[1],i.data)}else error("Unknown action from worker: "+i.action)}}function loadJpegStream(e,t,n){var r=new Image;r.onload=function(){n.resolve(e,r)},r.onerror=function(){n.resolve(e,null),warn("Error during JPEG image loading")},r.src=t}var JpxImage=function(){function e(){this.failOnCorruptedImage=!1}function t(e,t){e.x0=Math.ceil(t.XOsiz/e.XRsiz),e.x1=Math.ceil(t.Xsiz/e.XRsiz),e.y0=Math.ceil(t.YOsiz/e.YRsiz),e.y1=Math.ceil(t.Ysiz/e.YRsiz),e.width=e.x1-e.x0,e.height=e.y1-e.y0}function n(e,t){for(var n,r=e.SIZ,i=[],s=Math.ceil((r.Xsiz-r.XTOsiz)/r.XTsiz),a=Math.ceil((r.Ysiz-r.YTOsiz)/r.YTsiz),o=0;a>o;o++)for(var c=0;s>c;c++)(n={}).tx0=Math.max(r.XTOsiz+c*r.XTsiz,r.XOsiz),n.ty0=Math.max(r.YTOsiz+o*r.YTsiz,r.YOsiz),n.tx1=Math.min(r.XTOsiz+(c+1)*r.XTsiz,r.Xsiz),n.ty1=Math.min(r.YTOsiz+(o+1)*r.YTsiz,r.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],i.push(n);e.tiles=i;for(var l=0,h=r.Csiz;h>l;l++)for(var u=t[l],p=0,f=i.length;f>p;p++){var d={};n=i[p],d.tcx0=Math.ceil(n.tx0/u.XRsiz),d.tcy0=Math.ceil(n.ty0/u.YRsiz),d.tcx1=Math.ceil(n.tx1/u.XRsiz),d.tcy1=Math.ceil(n.ty1/u.YRsiz),d.width=d.tcx1-d.tcx0,d.height=d.tcy1-d.tcy0,n.components[l]=d}}function r(e,t,n){var r=t.codingStyleParameters,i={};return r.entropyCoderWithCustomPrecincts?(i.PPx=r.precinctsSizes[n].PPx,i.PPy=r.precinctsSizes[n].PPy):(i.PPx=15,i.PPy=15),i.xcb_=n>0?Math.min(r.xcb,i.PPx-1):Math.min(r.xcb,i.PPx),i.ycb_=n>0?Math.min(r.ycb,i.PPy-1):Math.min(r.ycb,i.PPy),i}function i(e,t,n){var r=1<<n.PPx,i=1<<n.PPy,s=0===t.resLevel,a=1<<n.PPx+(s?0:-1),o=1<<n.PPy+(s?0:-1),c=t.trx1>t.trx0?Math.ceil(t.trx1/r)-Math.floor(t.trx0/r):0,l=t.try1>t.try0?Math.ceil(t.try1/i)-Math.floor(t.try0/i):0,h=c*l;t.precinctParameters={precinctWidth:r,precinctHeight:i,numprecinctswide:c,numprecinctshigh:l,numprecincts:h,precinctWidthInSubband:a,precinctHeightInSubband:o}}function s(e,t,n){var r,i,s,a,o=n.xcb_,c=n.ycb_,l=1<<o,h=1<<c,u=t.tbx0>>o,p=t.tby0>>c,f=t.tbx1+l-1>>o,d=t.tby1+h-1>>c,m=t.resolution.precinctParameters,g=[],v=[];for(i=p;d>i;i++)for(r=u;f>r;r++)if((s={cbx:r,cby:i,tbx0:l*r,tby0:h*i,tbx1:l*(r+1),tby1:h*(i+1)}).tbx0_=Math.max(t.tbx0,s.tbx0),s.tby0_=Math.max(t.tby0,s.tby0),s.tbx1_=Math.min(t.tbx1,s.tbx1),s.tby1_=Math.min(t.tby1,s.tby1),a=Math.floor((s.tbx0_-t.tbx0)/m.precinctWidthInSubband)+Math.floor((s.tby0_-t.tby0)/m.precinctHeightInSubband)*m.numprecinctswide,s.precinctNumber=a,s.subbandType=t.type,s.Lblock=3,!(s.tbx1_<=s.tbx0_||s.tby1_<=s.tby0_)){g.push(s);var b=v[a];void 0!==b?(r<b.cbxMin?b.cbxMin=r:r>b.cbxMax&&(b.cbxMax=r),i<b.cbyMin?b.cbxMin=i:i>b.cbyMax&&(b.cbyMax=i)):v[a]=b={cbxMin:r,cbyMin:i,cbxMax:r,cbyMax:i},s.precinct=b}t.codeblockParameters={codeblockWidth:o,codeblockHeight:c,numcodeblockwide:f-u+1,numcodeblockhigh:d-p+1},t.codeblocks=g,t.precincts=v}function a(e,t,n){for(var r=[],i=e.subbands,s=0,a=i.length;a>s;s++)for(var o=i[s].codeblocks,c=0,l=o.length;l>c;c++){var h=o[c];h.precinctNumber===t&&r.push(h)}return{layerNumber:n,codeblocks:r}}function o(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,s=t.Csiz,o=0,c=0;s>c;c++)o=Math.max(o,r.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,h=0,u=0,p=0;this.nextPacket=function(){for(;i>l;l++){for(;o>=h;h++){for(;s>u;u++){var e=r.components[u];if(!(h>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[h],n=t.precinctParameters.numprecincts;n>p;){var c=a(t,p,l);return p++,c}p=0}}u=0}h=0}}}function c(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,s=t.Csiz,o=0,c=0;s>c;c++)o=Math.max(o,r.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,h=0,u=0,p=0;this.nextPacket=function(){for(;o>=l;l++){for(;i>h;h++){for(;s>u;u++){var e=r.components[u];if(!(l>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[l],n=t.precinctParameters.numprecincts;n>p;){var c=a(t,p,h);return p++,c}p=0}}u=0}h=0}}}function l(e){var t,n,r,i,s=e.SIZ,o=e.currentTile.index,c=e.tiles[o],l=c.codingStyleDefaultParameters.layersCount,h=s.Csiz,u=0;for(r=0;h>r;r++){var p=c.components[r];u=Math.max(u,p.codingStyleParameters.decompositionLevelsCount)}var f=new Int32Array(u+1);for(n=0;u>=n;++n){var d=0;for(r=0;h>r;++r){var m=c.components[r].resolutions;n<m.length&&(d=Math.max(d,m[n].precinctParameters.numprecincts))}f[n]=d}t=0,n=0,r=0,i=0,this.nextPacket=function(){for(;u>=n;n++){for(;i<f[n];i++){for(;h>r;r++){var e=c.components[r];if(!(n>e.codingStyleParameters.decompositionLevelsCount)){var s=e.resolutions[n],o=s.precinctParameters.numprecincts;if(!(i>=o)){for(;l>t;){var p=a(s,i,t);return t++,p}t=0}}}r=0}i=0}}}function h(e){var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,s=t.Csiz,o=f(r),c=o,l=0,h=0,u=0,d=0,m=0;this.nextPacket=function(){for(;m<c.maxNumHigh;m++){for(;d<c.maxNumWide;d++){for(;s>u;u++){for(var e=r.components[u],t=e.codingStyleParameters.decompositionLevelsCount;t>=h;h++){var n=e.resolutions[h],f=o.components[u].resolutions[h],g=p(d,m,f,c,n);if(null!==g){for(;i>l;){var v=a(n,g,l);return l++,v}l=0}}h=0}u=0}d=0}}}function u(e){var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,s=t.Csiz,o=f(r),c=0,l=0,h=0,u=0,d=0;this.nextPacket=function(){for(;s>h;++h){for(var e=r.components[h],t=o.components[h],n=e.codingStyleParameters.decompositionLevelsCount;d<t.maxNumHigh;d++){for(;u<t.maxNumWide;u++){for(;n>=l;l++){var f=e.resolutions[l],m=t.resolutions[l],g=p(u,d,m,t,f);if(null!==g){for(;i>c;){var v=a(f,g,c);return c++,v}c=0}}l=0}u=0}d=0}}}function p(e,t,n,r,i){var s=e*r.minWidth,a=t*r.minHeight;if(s%n.width!=0||a%n.height!=0)return null;var o=a/n.width*i.precinctParameters.numprecinctswide;return s/n.height+o}function f(e){for(var t=e.components.length,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=0,s=0,a=new Array(t),o=0;t>o;o++){for(var c=e.components[o],l=c.codingStyleParameters.decompositionLevelsCount,h=new Array(l+1),u=Number.MAX_VALUE,p=Number.MAX_VALUE,f=0,d=0,m=1,g=l;g>=0;--g){var v=c.resolutions[g],b=m*v.precinctParameters.precinctWidth,y=m*v.precinctParameters.precinctHeight;u=Math.min(u,b),p=Math.min(p,y),f=Math.max(f,v.precinctParameters.numprecinctswide),d=Math.max(d,v.precinctParameters.numprecinctshigh),h[g]={width:b,height:y},m<<=1}n=Math.min(n,u),r=Math.min(r,p),i=Math.max(i,f),s=Math.max(s,d),a[o]={resolutions:h,minWidth:u,minHeight:p,maxNumWide:f,maxNumHigh:d}}return{components:a,minWidth:n,minHeight:r,maxNumWide:i,maxNumHigh:s}}function d(e){for(var t=e.SIZ,n=e.currentTile.index,a=e.tiles[n],p=t.Csiz,f=0;p>f;f++){for(var d=a.components[f],m=d.codingStyleParameters.decompositionLevelsCount,g=[],v=[],b=0;m>=b;b++){var y,w=r(0,d,b),x={},P=1<<m-b;if(x.trx0=Math.ceil(d.tcx0/P),x.try0=Math.ceil(d.tcy0/P),x.trx1=Math.ceil(d.tcx1/P),x.try1=Math.ceil(d.tcy1/P),x.resLevel=b,i(0,x,w),g.push(x),0===b)(y={}).type="LL",y.tbx0=Math.ceil(d.tcx0/P),y.tby0=Math.ceil(d.tcy0/P),y.tbx1=Math.ceil(d.tcx1/P),y.tby1=Math.ceil(d.tcy1/P),y.resolution=x,s(0,y,w),v.push(y),x.subbands=[y];else{var S=1<<m-b+1,C=[];(y={}).type="HL",y.tbx0=Math.ceil(d.tcx0/S-.5),y.tby0=Math.ceil(d.tcy0/S),y.tbx1=Math.ceil(d.tcx1/S-.5),y.tby1=Math.ceil(d.tcy1/S),y.resolution=x,s(0,y,w),v.push(y),C.push(y),(y={}).type="LH",y.tbx0=Math.ceil(d.tcx0/S),y.tby0=Math.ceil(d.tcy0/S-.5),y.tbx1=Math.ceil(d.tcx1/S),y.tby1=Math.ceil(d.tcy1/S-.5),y.resolution=x,s(0,y,w),v.push(y),C.push(y),(y={}).type="HH",y.tbx0=Math.ceil(d.tcx0/S-.5),y.tby0=Math.ceil(d.tcy0/S-.5),y.tbx1=Math.ceil(d.tcx1/S-.5),y.tby1=Math.ceil(d.tcy1/S-.5),y.resolution=x,s(0,y,w),v.push(y),C.push(y),x.subbands=C}}d.resolutions=g,d.subbands=v}var T=a.codingStyleDefaultParameters.progressionOrder;switch(T){case 0:a.packetsIterator=new o(e);break;case 1:a.packetsIterator=new c(e);break;case 2:a.packetsIterator=new l(e);break;case 3:a.packetsIterator=new h(e);break;case 4:a.packetsIterator=new u(e);break;default:throw new Error("JPX Error: Unsupported progression order "+T)}}function m(e,t,n,r){function i(e){for(;e>u;){if(n+h>=t.length)throw new Error("Unexpected EOF");var r=t[n+h];h++,p?(l=l<<7|r,u+=7,p=!1):(l=l<<8|r,u+=8),255===r&&(p=!0)}return l>>>(u-=e)&(1<<e)-1}function s(e){return 255===t[n+h-1]&&t[n+h]===e?(a(1),!0):255===t[n+h]&&t[n+h+1]===e&&(a(2),!0)}function a(e){h+=e}function o(){u=0,p&&(h++,p=!1)}function c(){if(0===i(1))return 1;if(0===i(1))return 2;var e=i(2);return 3>e?e+3:31>(e=i(5))?e+6:(e=i(7))+37}for(var l,h=0,u=0,p=!1,f=e.currentTile.index,d=e.tiles[f],m=e.COD.sopMarkerUsed,g=e.COD.ephMarkerUsed,v=d.packetsIterator;r>h;)try{o(),m&&s(145)&&a(4);var b=v.nextPacket();if(void 0===b)return;if(!i(1))continue;for(var y,w=b.layerNumber,S=[],C=0,T=b.codeblocks.length;T>C;C++){var M=(y=b.codeblocks[C]).precinct,k=y.cbx-M.cbxMin,E=y.cby-M.cbyMin,F=!1,I=!1;if(void 0!==y.included)F=!!i(1);else{var U,D;if(void 0!==(M=y.precinct).inclusionTree)U=M.inclusionTree;else{var L=M.cbxMax-M.cbxMin+1,O=M.cbyMax-M.cbyMin+1;U=new P(L,O),D=new x(L,O),M.inclusionTree=U,M.zeroBitPlanesTree=D}for(U.reset(k,E,w);;){if(h>=t.length)return;if(U.isAboveThreshold())break;if(U.isKnown())U.nextLevel();else if(i(1)){if(U.setKnown(),U.isLeaf()){y.included=!0,F=I=!0;break}U.nextLevel()}else U.incrementValue()}}if(F){if(I){for((D=M.zeroBitPlanesTree).reset(k,E);;){if(h>=t.length)return;if(i(1)){if(!D.nextLevel())break}else D.incrementValue()}y.zeroBitPlanes=D.value}for(var R=c();i(1);)y.Lblock++;var A=log2(R),_=i((1<<A>R?A-1:A)+y.Lblock);S.push({codeblock:y,codingpasses:R,dataLength:_})}}for(o(),g&&s(146);S.length>0;){var j=S.shift();void 0===(y=j.codeblock).data&&(y.data=[]),y.data.push({data:t,start:n+h,end:n+h+j.dataLength,codingpasses:j.codingpasses}),h+=j.dataLength}}catch(e){return}return h}function g(e,t,n,r,i,s,a,o){for(var c=r.tbx0,l=r.tby0,h=r.tbx1-r.tbx0,u=r.codeblocks,p="H"===r.type.charAt(0)?1:0,f="H"===r.type.charAt(1)?t:0,d=0,m=u.length;m>d;++d){var g=u[d],v=g.tbx1_-g.tbx0_,b=g.tby1_-g.tby0_;if(0!==v&&0!==b&&void 0!==g.data){var y,w;y=new S(v,b,g.subbandType,g.zeroBitPlanes,s),w=2;var x,P,C,T=g.data,M=0,k=0;for(x=0,P=T.length;P>x;x++)M+=(C=T[x]).end-C.start,k+=C.codingpasses;var E=new Int16Array(M),F=0;for(x=0,P=T.length;P>x;x++){var I=(C=T[x]).data.subarray(C.start,C.end);E.set(I,F),F+=I.length}var U=new ArithmeticDecoder(E,0,M);for(y.setDecoder(U),x=0;k>x;x++){switch(w){case 0:y.runSignificancePropogationPass();break;case 1:y.runMagnitudeRefinementPass();break;case 2:y.runCleanupPass(),o&&y.checkSegmentationSymbol()}w=(w+1)%3}var D,L,O,R=g.tbx0_-c+(g.tby0_-l)*h,A=y.coefficentsSign,_=y.coefficentsMagnitude,j=y.bitsDecoded,z=a?0:.5;F=0;var B="LL"!==r.type;for(x=0;b>x;x++){var q=2*(R/h|0)*(t-h)+p+f;for(D=0;v>D;D++){if(0!==(L=_[F]))L=(L+z)*i,0!==A[F]&&(L=-L),O=j[F],e[B?q+(R<<1):R]=a&&O>=s?L:L*(1<<s-O);R++,F++}R+=h-v}}}}function v(e,t,n){for(var r=t.components[n],i=r.codingStyleParameters,s=r.quantizationParameters,a=i.decompositionLevelsCount,o=s.SPqcds,c=s.scalarExpounded,l=s.guardBits,h=i.segmentationSymbolUsed,u=e.components[n].precision,p=i.reversibleTransformation,f=p?new M:new T,d=[],m=0,v=0;a>=v;v++){for(var b=r.resolutions[v],y=b.trx1-b.trx0,x=b.try1-b.try0,P=new Float32Array(y*x),S=0,C=b.subbands.length;C>S;S++){var k,E;c?(k=o[m].mu,E=o[m].epsilon,m++):(k=o[0].mu,E=o[0].epsilon+(v>0?1-v:0));var F=b.subbands[S],I=w[F.type];g(P,y,0,F,p?1:Math.pow(2,u+I-E)*(1+k/2048),l+E-1,p,h)}d.push({width:y,height:x,items:P})}var U=f.calculate(d,r.tcx0,r.tcy0);return{left:r.tcx0,top:r.tcy0,width:U.width,height:U.height,items:U.items}}function b(e){for(var t=e.SIZ,n=e.components,r=t.Csiz,i=[],s=0,a=e.tiles.length;a>s;s++){var o,c=e.tiles[s],l=[];for(o=0;r>o;o++)l[o]=v(e,c,o);var h=l[0];if(j=n[0].isSigned)var u=new Int16Array(h.items.length*r);else u=new Uint16Array(h.items.length*r);var p,f,d,m,g,b,y,w,x,P,S,C,T,M,k,E={left:h.left,top:h.top,width:h.width,height:h.height,items:u},F=0;if(c.codingStyleDefaultParameters.multipleComponentTransform){var I=4===r,U=l[0].items,D=l[1].items,L=l[2].items,O=I?l[3].items:null;f=.5+(128<<(p=n[0].precision-8)),m=-(g=.5*(d=255*(1<<p)));var R=c.components[0],A=r-3;if(y=U.length,R.codingStyleParameters.reversibleTransformation)for(b=0;y>b;b++,F+=A)w=U[b]+f,x=D[b],S=(C=w-((P=L[b])+x>>2))+P,T=C+x,u[F++]=0>=S?0:S>=d?255:S>>p,u[F++]=0>=C?0:C>=d?255:C>>p,u[F++]=0>=T?0:T>=d?255:T>>p;else for(b=0;y>b;b++,F+=A)w=U[b]+f,x=D[b],S=w+1.402*(P=L[b]),C=w-.34413*x-.71414*P,T=w+1.772*x,u[F++]=0>=S?0:S>=d?255:S>>p,u[F++]=0>=C?0:C>=d?255:C>>p,u[F++]=0>=T?0:T>=d?255:T>>p;if(I)for(b=0,F=3;y>b;b++,F+=4)M=O[b],u[F]=m>=M?0:M>=g?255:M+f>>p}else for(o=0;r>o;o++)if(8===n[o].precision){var _=l[o].items;for(f=.5+(128<<(p=n[o].precision-8)),m=-(d=127.5*(1<<p)),F=o,b=0,y=_.length;y>b;b++)k=_[b],u[F]=m>=k?0:k>=d?255:k+f>>p,F+=r}else{var j=n[o].isSigned;if(_=l[o].items,j)for(F=o,b=0,y=_.length;y>b;b++)u[F]=_[b],F+=r;else{f=.5+(128<<(p=n[o].precision-8));var z=Math.pow(2,n[o].precision)-1;for(F=o,b=0,y=_.length;y>b;b++)k=_[b],u[F]=Math.max(Math.min(k+f,z),0),F+=r}}i.push(E)}return i}function y(e,t){for(var n=e.SIZ.Csiz,r=e.tiles[t],i=0;n>i;i++){var s=r.components[i],a=void 0!==e.currentTile.QCC[i]?e.currentTile.QCC[i]:e.currentTile.QCD;s.quantizationParameters=a;var o=void 0!==e.currentTile.COC[i]?e.currentTile.COC[i]:e.currentTile.COD;s.codingStyleParameters=o}r.codingStyleDefaultParameters=e.currentTile.COD}var w={LL:0,LH:1,HL:1,HH:2};e.prototype={parse:function(e){if(65359!==readUint16(e,0))for(var t=0,n=e.length;n>t;){var r=8,i=readUint32(e,t),s=readUint32(e,t+4);if(t+=r,1===i&&(i=4294967296*readUint32(e,t)+readUint32(e,t+4),t+=8,r+=8),0===i&&(i=n-t+r),r>i)throw new Error("JPX Error: Invalid box field size");var a=i-r,o=!0;switch(s){case 1785737832:o=!1;break;case 1668246642:var c=e[t];if(e[t+1],e[t+2],1===c){var l=readUint32(e,t+3);switch(l){case 16:case 17:case 18:break;default:warn("Unknown colorspace "+l)}}else 2===c&&info("ICC profile not supported");break;case 1785737827:this.parseCodestream(e,t,t+a);break;case 1783636e3:218793738!==readUint32(e,t)&&warn("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:warn("Unsupported header type "+s+" ("+String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s)+")")}o&&(t+=a)}else this.parseCodestream(e,0,e.length)},parseImageProperties:function(e){for(var t=e.getByte();t>=0;)if(65361==(t<<8|(t=e.getByte()))){e.skip(4);var n=e.getInt32()>>>0,r=e.getInt32()>>>0,i=e.getInt32()>>>0,s=e.getInt32()>>>0;e.skip(16);var a=e.getUint16();return this.width=n-i,this.height=r-s,this.componentsCount=a,void(this.bitsPerComponent=8)}throw new Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function(e,r,i){var s={};try{for(var a=!1,o=r;i>o+1;){var c=readUint16(e,o);o+=2;var l,h,u,p,f,g,v=0;switch(c){case 65359:s.mainHeader=!0;break;case 65497:break;case 65361:v=readUint16(e,o);var w={};w.Xsiz=readUint32(e,o+4),w.Ysiz=readUint32(e,o+8),w.XOsiz=readUint32(e,o+12),w.YOsiz=readUint32(e,o+16),w.XTsiz=readUint32(e,o+20),w.YTsiz=readUint32(e,o+24),w.XTOsiz=readUint32(e,o+28),w.YTOsiz=readUint32(e,o+32);var x=readUint16(e,o+36);w.Csiz=x;var P=[];l=o+38;for(var S=0;x>S;S++){var C={precision:1+(127&e[l]),isSigned:!!(128&e[l]),XRsiz:e[l+1],YRsiz:e[l+1]};t(C,w),P.push(C)}s.SIZ=w,s.components=P,n(s,P),s.QCC=[],s.COC=[];break;case 65372:v=readUint16(e,o);var T={};switch(l=o+2,31&(h=e[l++])){case 0:p=8,f=!0;break;case 1:p=16,f=!1;break;case 2:p=16,f=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+h)}for(T.noQuantization=8===p,T.scalarExpounded=f,T.guardBits=h>>5,u=[];v+o>l;){var M={};8===p?(M.epsilon=e[l++]>>3,M.mu=0):(M.epsilon=e[l]>>3,M.mu=(7&e[l])<<8|e[l+1],l+=2),u.push(M)}T.SPqcds=u,s.mainHeader?s.QCD=T:(s.currentTile.QCD=T,s.currentTile.QCC=[]);break;case 65373:v=readUint16(e,o);var k,E={};switch(l=o+2,s.SIZ.Csiz<257?k=e[l++]:(k=readUint16(e,l),l+=2),31&(h=e[l++])){case 0:p=8,f=!0;break;case 1:p=16,f=!1;break;case 2:p=16,f=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+h)}for(E.noQuantization=8===p,E.scalarExpounded=f,E.guardBits=h>>5,u=[];v+o>l;)M={},8===p?(M.epsilon=e[l++]>>3,M.mu=0):(M.epsilon=e[l]>>3,M.mu=(7&e[l])<<8|e[l+1],l+=2),u.push(M);E.SPqcds=u,s.mainHeader?s.QCC[k]=E:s.currentTile.QCC[k]=E;break;case 65362:v=readUint16(e,o);var F={};l=o+2;var I=e[l++];F.entropyCoderWithCustomPrecincts=!!(1&I),F.sopMarkerUsed=!!(2&I),F.ephMarkerUsed=!!(4&I),F.progressionOrder=e[l++],F.layersCount=readUint16(e,l),l+=2,F.multipleComponentTransform=e[l++],F.decompositionLevelsCount=e[l++],F.xcb=2+(15&e[l++]),F.ycb=2+(15&e[l++]);var U=e[l++];if(F.selectiveArithmeticCodingBypass=!!(1&U),F.resetContextProbabilities=!!(2&U),F.terminationOnEachCodingPass=!!(4&U),F.verticalyStripe=!!(8&U),F.predictableTermination=!!(16&U),F.segmentationSymbolUsed=!!(32&U),F.reversibleTransformation=e[l++],F.entropyCoderWithCustomPrecincts){for(var D=[];v+o>l;){var L=e[l++];D.push({PPx:15&L,PPy:L>>4})}F.precinctsSizes=D}var O=[];if(F.selectiveArithmeticCodingBypass&&O.push("selectiveArithmeticCodingBypass"),F.resetContextProbabilities&&O.push("resetContextProbabilities"),F.terminationOnEachCodingPass&&O.push("terminationOnEachCodingPass"),F.verticalyStripe&&O.push("verticalyStripe"),F.predictableTermination&&O.push("predictableTermination"),O.length>0)throw a=!0,new Error("JPX Error: Unsupported COD options ("+O.join(", ")+")");s.mainHeader?s.COD=F:(s.currentTile.COD=F,s.currentTile.COC=[]);break;case 65424:v=readUint16(e,o),(g={}).index=readUint16(e,o+2),g.length=readUint32(e,o+4),g.dataEnd=g.length+o-2,g.partIndex=e[o+8],g.partsCount=e[o+9],s.mainHeader=!1,0===g.partIndex&&(g.COD=s.COD,g.COC=s.COC.slice(0),g.QCD=s.QCD,g.QCC=s.QCC.slice(0)),s.currentTile=g;break;case 65427:0===(g=s.currentTile).partIndex&&(y(s,g.index),d(s)),m(s,e,o,v=g.dataEnd-o);break;case 65365:case 65367:case 65368:case 65380:v=readUint16(e,o);break;case 65363:throw new Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("JPX Error: Unknown codestream code: "+c.toString(16))}o+=v}}catch(e){if(a||this.failOnCorruptedImage)throw e;warn("Trying to recover from "+e.message)}this.tiles=b(s),this.width=s.SIZ.Xsiz-s.SIZ.XOsiz,this.height=s.SIZ.Ysiz-s.SIZ.YOsiz,this.componentsCount=s.SIZ.Csiz}};var x=function(){function e(e,t){var n=log2(Math.max(e,t))+1;this.levels=[];for(var r=0;n>r;r++){var i={width:e,height:t,items:[]};this.levels.push(i),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t){for(var n,r=0,i=0;r<this.levels.length;){var s=e+t*(n=this.levels[r]).width;if(void 0!==n.items[s]){i=n.items[s];break}n.index=s,e>>=1,t>>=1,r++}r--,(n=this.levels[r]).items[n.index]=i,this.currentLevel=r,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];return 0>--e?(this.value=n,!1):(this.currentLevel=e,(t=this.levels[e]).items[t.index]=n,!0)}},e}(),P=function(){function e(e,t){var n=log2(Math.max(e,t))+1;this.levels=[];for(var r=0;n>r;r++){for(var i=new Uint8Array(e*t),s=new Uint8Array(e*t),a=0,o=i.length;o>a;a++)i[a]=0,s[a]=0;var c={width:e,height:t,items:i,status:s};this.levels.push(c),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t,n){this.currentStopValue=n;for(var r=0;r<this.levels.length;){var i=this.levels[r],s=e+t*i.width;i.index=s,e>>=1,t>>=1,r++}this.currentLevel=this.levels.length-1,this.minValue=this.levels[this.currentLevel].items[0]},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]=e.items[e.index]+1,e.items[e.index]>this.minValue&&(this.minValue=e.items[e.index])},nextLevel:function(){var e=this.currentLevel;if(0>--e)return!1;this.currentLevel=e;var t=this.levels[e];return t.items[t.index]<this.minValue?t.items[t.index]=this.minValue:t.items[t.index]>this.minValue&&(this.minValue=t.items[t.index]),!0},isLeaf:function(){return 0===this.currentLevel},isAboveThreshold:function(){var e=this.currentLevel,t=this.levels[e];return t.items[t.index]>this.currentStopValue},isKnown:function(){var e=this.currentLevel,t=this.levels[e];return t.status[t.index]>0},setKnown:function(){var e=this.currentLevel,t=this.levels[e];t.status[t.index]=1}},e}(),S=function(){function e(e,t,s,a,o){this.width=e,this.height=t,this.contextLabelTable="HH"===s?i:"HL"===s?r:n;var c=e*t;this.neighborsSignificance=new Uint8Array(c),this.coefficentsSign=new Uint8Array(c),this.coefficentsMagnitude=o>14?new Uint32Array(c):o>6?new Uint16Array(c):new Uint8Array(c),this.processingFlags=new Uint8Array(c);var l=new Uint8Array(c);if(0!==a)for(var h=0;c>h;h++)l[h]=a;this.bitsDecoded=l,this.reset()}var t=17,n=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),r=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),i=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return e.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[t]=92,this.contexts[18]=6},setNeighborsSignificance:function(e,t,n){var r,i=this.neighborsSignificance,s=this.width,a=this.height,o=t>0,c=s>t+1;e>0&&(r=n-s,o&&(i[r-1]+=16),c&&(i[r+1]+=16),i[r]+=4),a>e+1&&(r=n+s,o&&(i[r-1]+=16),c&&(i[r+1]+=16),i[r]+=4),o&&(i[n-1]+=1),c&&(i[n+1]+=1),i[n]|=128},runSignificancePropogationPass:function(){for(var e=this.decoder,t=this.width,n=this.height,r=this.coefficentsMagnitude,i=this.coefficentsSign,s=this.neighborsSignificance,a=this.processingFlags,o=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,h=0;n>h;h+=4)for(var u=0;t>u;u++)for(var p=h*t+u,f=0;4>f;f++,p+=t){var d=h+f;if(d>=n)break;if(a[p]&=-2,!r[p]&&s[p]){var m=c[s[p]];if(e.readBit(o,m)){var g=this.decodeSignBit(d,u,p);i[p]=g,r[p]=1,this.setNeighborsSignificance(d,u,p),a[p]|=2}l[p]++,a[p]|=1}}},decodeSignBit:function(e,t,n){var r,i,s,a,o,c,l=this.width,h=this.height,u=this.coefficentsMagnitude,p=this.coefficentsSign;a=t>0&&0!==u[n-1],l>t+1&&0!==u[n+1]?(s=p[n+1],r=a?1-s-(i=p[n-1]):1-s-s):r=a?1-(i=p[n-1])-i:0;var f=3*r;return a=e>0&&0!==u[n-l],h>e+1&&0!==u[n+l]?(s=p[n+l],r=a?1-s-(i=p[n-l])+f:1-s-s+f):r=a?1-(i=p[n-l])-i+f:f,r>=0?(o=9+r,c=this.decoder.readBit(this.contexts,o)):(o=9-r,c=1^this.decoder.readBit(this.contexts,o)),c},runMagnitudeRefinementPass:function(){for(var e,t=this.decoder,n=this.width,r=this.height,i=this.coefficentsMagnitude,s=this.neighborsSignificance,a=this.contexts,o=this.bitsDecoded,c=this.processingFlags,l=n*r,h=4*n,u=0;l>u;u=e){e=Math.min(l,u+h);for(var p=0;n>p;p++)for(var f=u+p;e>f;f+=n)if(i[f]&&0==(1&c[f])){var d=16;0!=(2&c[f])&&(c[f]^=2,d=0==(127&s[f])?15:14);var m=t.readBit(a,d);i[f]=i[f]<<1|m,o[f]++,c[f]|=1}}},runCleanupPass:function(){for(var e,n=this.decoder,r=this.width,i=this.height,s=this.neighborsSignificance,a=this.coefficentsMagnitude,o=this.coefficentsSign,c=this.contexts,l=this.contextLabelTable,h=this.bitsDecoded,u=this.processingFlags,p=r,f=2*r,d=3*r,m=0;i>m;m=e){e=Math.min(m+4,i);for(var g=m*r,v=i>m+3,b=0;r>b;b++){var y,w=g+b,x=0,P=w,S=m;if(v&&0===u[w]&&0===u[w+p]&&0===u[w+f]&&0===u[w+d]&&0===s[w]&&0===s[w+p]&&0===s[w+f]&&0===s[w+d]){if(!n.readBit(c,18)){h[w]++,h[w+p]++,h[w+f]++,h[w+d]++;continue}0!=(x=n.readBit(c,t)<<1|n.readBit(c,t))&&(S=m+x,P+=x*r),y=this.decodeSignBit(S,b,P),o[P]=y,a[P]=1,this.setNeighborsSignificance(S,b,P),u[P]|=2,P=w;for(var C=m;S>=C;C++,P+=r)h[P]++;x++}for(S=m+x;e>S;S++,P+=r)if(!a[P]&&0==(1&u[P])){var T=l[s[P]];1===n.readBit(c,T)&&(y=this.decodeSignBit(S,b,P),o[P]=y,a[P]=1,this.setNeighborsSignificance(S,b,P),u[P]|=2),h[P]++}}}},checkSegmentationSymbol:function(){var e=this.decoder,n=this.contexts;if(10!=(e.readBit(n,t)<<3|e.readBit(n,t)<<2|e.readBit(n,t)<<1|e.readBit(n,t)))throw new Error("JPX Error: Invalid segmentation symbol")}},e}(),C=function(){function e(){}return e.prototype.calculate=function(e,t,n){for(var r=e[0],i=1,s=e.length;s>i;i++)r=this.iterate(r,e[i],t,n);return r},e.prototype.extend=function(e,t,n){var r=t-1,i=t+1,s=t+n-2,a=t+n;e[r--]=e[i++],e[a++]=e[s--],e[r--]=e[i++],e[a++]=e[s--],e[r--]=e[i++],e[a++]=e[s--],e[r]=e[i],e[a]=e[s]},e.prototype.iterate=function(e,t,n,r){var i,s,a,o,c,l,h=e.width,u=e.height,p=e.items,f=t.width,d=t.height,m=t.items;for(a=0,i=0;u>i;i++)for(o=2*i*f,s=0;h>s;s++,a++,o+=2)m[o]=p[a];p=e.items=null;var g=new Float32Array(f+8);if(1===f){if(0!=(1&n))for(l=0,a=0;d>l;l++,a+=f)m[a]*=.5}else for(l=0,a=0;d>l;l++,a+=f)g.set(m.subarray(a,a+f),4),this.extend(g,4,f),this.filter(g,4,f),m.set(g.subarray(4,4+f),a);var v=16,b=[];for(i=0;v>i;i++)b.push(new Float32Array(d+8));var y,w=0;if(e=4+d,1===d){if(0!=(1&r))for(c=0;f>c;c++)m[c]*=.5}else for(c=0;f>c;c++){if(0===w){for(v=Math.min(f-c,v),a=c,o=4;e>o;a+=f,o++)for(y=0;v>y;y++)b[y][o]=m[a+y];w=v}var x=b[--w];if(this.extend(x,4,d),this.filter(x,4,d),0===w)for(a=c-v+1,o=4;e>o;a+=f,o++)for(y=0;v>y;y++)m[a+y]=b[y][o]}return{width:f,height:d,items:m}},e}(),T=function(){function e(){C.call(this)}return e.prototype=Object.create(C.prototype),e.prototype.filter=function(e,t,n){var r,i,s,a,o=n>>1,c=-1.586134342059924,l=-.052980118572961,h=.882911075530934,u=.443506852043971,p=1.230174104914001;for(r=(t|=0)-3,i=o+4;i--;r+=2)e[r]*=.8128930661159609;for(s=u*e[(r=t-2)-1],i=o+3;i--&&(a=u*e[r+1],e[r]=p*e[r]-s-a,i--);r+=2)s=u*e[(r+=2)+1],e[r]=p*e[r]-s-a;for(s=h*e[(r=t-1)-1],i=o+2;i--&&(a=h*e[r+1],e[r]-=s+a,i--);r+=2)s=h*e[(r+=2)+1],e[r]-=s+a;for(s=l*e[(r=t)-1],i=o+1;i--&&(a=l*e[r+1],e[r]-=s+a,i--);r+=2)s=l*e[(r+=2)+1],e[r]-=s+a;if(0!==o)for(s=c*e[(r=t+1)-1],i=o;i--&&(a=c*e[r+1],e[r]-=s+a,i--);r+=2)s=c*e[(r+=2)+1],e[r]-=s+a},e}(),M=function(){function e(){C.call(this)}return e.prototype=Object.create(C.prototype),e.prototype.filter=function(e,t,n){var r,i,s=n>>1;for(r=t|=0,i=s+1;i--;r+=2)e[r]-=e[r-1]+e[r+1]+2>>2;for(r=t+1,i=s;i--;r+=2)e[r]+=e[r-1]+e[r+1]>>1},e}();return e}(),ArithmeticDecoder=function(){function e(e,t,n){this.data=e,this.bp=t,this.dataEnd=n,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}var t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];return e.prototype={byteIn:function(){var e=this.data,t=this.bp;255===e[t]?e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,n){var r,i=e[n]>>1,s=1&e[n],a=t[i],o=a.qe,c=this.a-o;if(this.chigh<o)o>c?(c=o,r=s,i=a.nmps):(c=o,r=1^s,1===a.switchFlag&&(s=r),i=a.nlps);else{if(this.chigh-=o,0!=(32768&c))return this.a=c,s;o>c?(r=1^s,1===a.switchFlag&&(s=r),i=a.nlps):(r=s,i=a.nmps)}do{0===this.ct&&this.byteIn(),c<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&c));return this.a=c,e[n]=i<<1|s,r}},e}(),globalScope="undefined"==typeof window?this:window,isWorker="undefined"==typeof window,FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={WIDGET:1,TEXT:2,LINK:3},StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};globalScope.PDFJS||(globalScope.PDFJS={}),globalScope.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var OPS=PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},UNSUPPORTED_FEATURES=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},UnsupportedManager=PDFJS.UnsupportedManager=function(){var e=[];return{listen:function(t){e.push(t)},notify:function(t){warn('Unsupported feature "'+t+'"');for(var n=0,r=e.length;r>n;n++)e[n](t)}}}();PDFJS.isValidUrl=isValidUrl,PDFJS.shadow=shadow;var PasswordResponses=PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordException=function(){function e(e,t){this.name="PasswordException",this.message=e,this.code=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.PasswordException=PasswordException;var UnknownErrorException=function(){function e(e,t){this.name="UnknownErrorException",this.message=e,this.details=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnknownErrorException=UnknownErrorException;var InvalidPDFException=function(){function e(e){this.name="InvalidPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.InvalidPDFException=InvalidPDFException;var MissingPDFException=function(){function e(e){this.name="MissingPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.MissingPDFException=MissingPDFException;var UnexpectedResponseException=function(){function e(e,t){this.name="UnexpectedResponseException",this.message=e,this.status=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnexpectedResponseException=UnexpectedResponseException;var NotImplementedException=function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="NotImplementedException",e.constructor=e,e}(),MissingDataException=function(){function e(e,t){this.begin=e,this.end=t,this.message="Missing data ["+e+", "+t+")"}return e.prototype=new Error,e.prototype.name="MissingDataException",e.constructor=e,e}(),XRefParseException=function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="XRefParseException",e.constructor=e,e}();Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){return shadow(PDFJS,"isLittleEndian",isLittleEndian())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function(){return shadow(PDFJS,"hasCanvasTypedArrays",hasCanvasTypedArrays())}});var Uint32ArrayView=function(){function e(e,t){this.buffer=e,this.byteLength=e.length,this.length=void 0===t?this.byteLength>>2:t,n(this.length)}function t(e){return{get:function(){var t=this.buffer,n=e<<2;return(t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24)>>>0},set:function(t){var n=this.buffer,r=e<<2;n[r]=255&t,n[r+1]=t>>8&255,n[r+2]=t>>16&255,n[r+3]=t>>>24&255}}}function n(n){for(;n>r;)Object.defineProperty(e.prototype,r,t(r)),r++}e.prototype=Object.create(null);var r=0;return e}(),IDENTITY_MATRIX=[1,0,0,1,0,0],Util=PDFJS.Util=function(){function e(){}var t=["rgb(",0,",",0,",",0,")"];return e.makeCssRgb=function(e,n,r){return t[1]=e,t[3]=n,t[5]=r,t.join("")},e.transform=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},e.applyTransform=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]},e.applyInverseTransform=function(e,t){var n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]},e.getAxialAlignedBoundingBox=function(t,n){var r=e.applyTransform(t,n),i=e.applyTransform(t.slice(2,4),n),s=e.applyTransform([t[0],t[3]],n),a=e.applyTransform([t[2],t[1]],n);return[Math.min(r[0],i[0],s[0],a[0]),Math.min(r[1],i[1],s[1],a[1]),Math.max(r[0],i[0],s[0],a[0]),Math.max(r[1],i[1],s[1],a[1])]},e.inverseTransform=function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]},e.apply3dTransform=function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},e.singularValueDecompose2dScale=function(e){var t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],a=(n+s)/2,o=Math.sqrt((n+s)*(n+s)-4*(n*s-i*r))/2,c=a+o||1,l=a-o||1;return[Math.sqrt(c),Math.sqrt(l)]},e.normalizeRect=function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t},e.intersect=function(t,n){function r(e,t){return e-t}var i=[t[0],t[2],n[0],n[2]].sort(r),s=[t[1],t[3],n[1],n[3]].sort(r),a=[];return t=e.normalizeRect(t),n=e.normalizeRect(n),(i[0]===t[0]&&i[1]===n[0]||i[0]===n[0]&&i[1]===t[0])&&(a[0]=i[1],a[2]=i[2],(s[0]===t[1]&&s[1]===n[1]||s[0]===n[1]&&s[1]===t[1])&&(a[1]=s[1],a[3]=s[2],a))},e.sign=function(e){return 0>e?-1:1},e.appendToArray=function(e,t){Array.prototype.push.apply(e,t)},e.prependToArray=function(e,t){Array.prototype.unshift.apply(e,t)},e.extendObj=function(e,t){for(var n in t)e[n]=t[n]},e.getInheritableProperty=function(e,t){for(;e&&!e.has(t);)e=e.get("Parent");return e?e.get(t):null},e.inherit=function(e,t,n){for(var r in e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n)e.prototype[r]=n[r]},e.loadScript=function(e,t){var n=document.createElement("script"),r=!1;n.setAttribute("src",e),t&&(n.onload=function(){r||t(),r=!0}),document.getElementsByTagName("head")[0].appendChild(n)},e}(),PageViewport=PDFJS.PageViewport=function(){function e(e,t,n,r,i,s){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=i;var a,o,c,l,h,u,p,f,d=(e[2]+e[0])/2,m=(e[3]+e[1])/2;switch(n=0>(n%=360)?n+360:n){case 180:a=-1,o=0,c=0,l=1;break;case 90:a=0,o=1,c=1,l=0;break;case 270:a=0,o=-1,c=-1,l=0;break;default:a=1,o=0,c=0,l=-1}s&&(c=-c,l=-l),0===a?(h=Math.abs(m-e[1])*t+r,u=Math.abs(d-e[0])*t+i,p=Math.abs(e[3]-e[1])*t,f=Math.abs(e[2]-e[0])*t):(h=Math.abs(d-e[0])*t+r,u=Math.abs(m-e[1])*t+i,p=Math.abs(e[2]-e[0])*t,f=Math.abs(e[3]-e[1])*t),this.transform=[a*t,o*t,c*t,l*t,h-a*t*d-c*t*m,u-o*t*d-l*t*m],this.width=p,this.height=f,this.fontScale=t}return e.prototype={clone:function(t){var n="scale"in(t=t||{})?t.scale:this.scale,r="rotation"in t?t.rotation:this.rotation;return new e(this.viewBox.slice(),n,r,this.offsetX,this.offsetY,t.dontFlip)},convertToViewportPoint:function(e,t){return Util.applyTransform([e,t],this.transform)},convertToViewportRectangle:function(e){var t=Util.applyTransform([e[0],e[1]],this.transform),n=Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]},convertToPdfPoint:function(e,t){return Util.applyInverseTransform([e,t],this.transform)}},e}(),PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];PDFJS.createPromiseCapability=createPromiseCapability,function(){function e(e){this._status=t,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(e){this._reject(e)}}if(globalScope.Promise)return"function"!=typeof globalScope.Promise.all&&(globalScope.Promise.all=function(e){var t,n,r=0,i=[],s=new globalScope.Promise((function(e,r){t=e,n=r}));return e.forEach((function(e,s){r++,e.then((function(e){i[s]=e,0==--r&&t(i)}),n)})),0===r&&t(i),s}),"function"!=typeof globalScope.Promise.resolve&&(globalScope.Promise.resolve=function(e){return new globalScope.Promise((function(t){t(e)}))}),"function"!=typeof globalScope.Promise.reject&&(globalScope.Promise.reject=function(e){return new globalScope.Promise((function(t,n){n(e)}))}),void("function"!=typeof globalScope.Promise.prototype.catch&&(globalScope.Promise.prototype.catch=function(e){return globalScope.Promise.prototype.then(void 0,e)}));var t=0,n={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==t&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var e=Date.now()+1;this.handlers.length>0;){var t=this.handlers.shift(),n=t.thisPromise._status,r=t.thisPromise._value;try{1===n?"function"==typeof t.onResolve&&(r=t.onResolve(r)):"function"==typeof t.onReject&&(r=t.onReject(r),n=1,t.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(t.thisPromise))}catch(e){n=2,r=e}if(t.nextPromise._updateStatus(n,r),Date.now()>=e)break}return this.handlers.length>0?void setTimeout(this.runHandlers.bind(this),0):void(this.running=!1)},addUnhandledRejection:function(e){this.unhandledRejections.push({promise:e,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(e){e._unhandledRejection=!1;for(var t=0;t<this.unhandledRejections.length;t++)this.unhandledRejections[t].promise===e&&(this.unhandledRejections.splice(t),t--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var e=Date.now(),t=0;t<this.unhandledRejections.length;t++)if(e-this.unhandledRejections[t].time>500){var n=this.unhandledRejections[t].promise._value,r="Unhandled rejection: "+n;n.stack&&(r+="\n"+n.stack),warn(r),this.unhandledRejections.splice(t),t--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};e.all=function(t){function n(e){2!==s._status&&(o=[],i(e))}var r,i,s=new e((function(e,t){r=e,i=t})),a=t.length,o=[];if(0===a)return r(o),s;for(var c=0,l=t.length;l>c;++c){var h=t[c],u=function(e){return function(t){2!==s._status&&(o[e]=t,0==--a&&r(o))}}(c);e.isPromise(h)?h.then(u,n):u(h)}return s},e.isPromise=function(e){return e&&"function"==typeof e.then},e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(t,r){if(1!==this._status&&2!==this._status){if(1===t&&e.isPromise(r))return void r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,2));this._status=t,this._value=r,2===t&&0===this._handlers.length&&(this._unhandledRejection=!0,n.addUnhandledRejection(this)),n.scheduleHandlers(this)}},_resolve:function(e){this._updateStatus(1,e)},_reject:function(e){this._updateStatus(2,e)},then:function(t,r){var i=new e((function(e,t){this.resolve=e,this.reject=t}));return this._handlers.push({thisPromise:this,onResolve:t,onReject:r,nextPromise:i}),n.scheduleHandlers(this),i},catch:function(e){return this.then(void 0,e)}},globalScope.Promise=e}();var StatTimer=function(){function e(e,t,n){for(;e.length<n;)e+=t;return e}function t(){this.started={},this.times=[],this.enabled=!0}return t.prototype={time:function(e){this.enabled&&(e in this.started&&warn("Timer is already running for "+e),this.started[e]=Date.now())},timeEnd:function(e){this.enabled&&(e in this.started||warn("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])},toString:function(){var t,n,r=this.times,i="",s=0;for(t=0,n=r.length;n>t;++t){var a=r[t].name;a.length>s&&(s=a.length)}for(t=0,n=r.length;n>t;++t){var o=r[t],c=o.end-o.start;i+=e(o.name," ",s)+" "+c+"ms\n"}return i}},t}();PDFJS.createBlob=function(e,t){if("undefined"!=typeof Blob)return new Blob([e],{type:t});var n=new MozBlobBuilder;return n.append(e),n.getBlob(t)},PDFJS.createObjectURL=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,n){if(!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var r=PDFJS.createBlob(t,n);return URL.createObjectURL(r)}for(var i="data:"+n+";base64,",s=0,a=t.length;a>s;s+=3){var o=255&t[s],c=255&t[s+1],l=255&t[s+2];i+=e[o>>2]+e[(3&o)<<4|c>>4]+e[a>s+1?(15&c)<<2|l>>6:64]+e[a>s+2?63&l:64]}return i}}(),MessageHandler.prototype={on:function(e,t,n){var r=this.actionHandler;r[e]&&error('There is already an actionName called "'+e+'"'),r[e]=[t,n]},send:function(e,t,n){var r={action:e,data:t};this.postMessage(r,n)},sendWithPromise:function(e,t,n){var r=this.callbackIndex++,i={action:e,data:t,callbackId:r},s=createPromiseCapability();this.callbacksCapabilities[r]=s;try{this.postMessage(i,n)}catch(e){s.reject(e)}return s.promise},postMessage:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}};export default JpxImage;